# Development Guide

This guide covers development setup, best practices, and useful commands for the Parcel Bridge project.

## 🚀 Quick Start

```bash
# Install dependencies
npm install

# Start development server with Turbopack (recommended)
npm run dev

# Open http://localhost:3000
```

## 🛠️ Development Commands

| Command | Description |
|---------|-------------|
| `npm run dev` | Start development server with Turbopack |
| `npm run dev:regular` | Start regular Next.js development server |
| `npm run build` | Build for production |
| `npm run build:analyze` | Build with bundle analysis |
| `npm run start` | Start production server |
| `npm run lint` | Run ESLint |

## ⚡ Turbopack Benefits

- **10x faster** than Webpack for development
- **Instant updates** on file changes
- **Better error reporting** and debugging
- **Optimized for Next.js 13+**

## 🏗️ Project Structure

```
src/
├── app/                 # Next.js App Router pages
│   ├── auth/           # Authentication pages
│   ├── dashboard/      # Dashboard pages
│   └── globals.css     # Global styles
├── components/         # Reusable components
│   ├── providers/      # Context providers
│   └── ui/            # UI components
├── lib/               # Utilities and configuration
│   ├── firebase.ts    # Firebase config
│   ├── store.ts       # Zustand store
│   └── utils.ts       # Helper functions
└── types/             # TypeScript definitions
```

## 🎨 Styling Guidelines

- Use **Tailwind CSS** utility classes
- Follow the established color palette (see README.md)
- Use responsive design patterns (`sm:`, `md:`, `lg:`, `xl:`)
- Prefer composition over custom CSS

### Color Usage
```tsx
// Primary actions
<Button className="bg-primary-600 hover:bg-primary-700">

// Status indicators
<span className="text-success-600 bg-success-50">Delivered</span>
<span className="text-warning-600 bg-warning-50">Pending</span>
<span className="text-danger-600 bg-danger-50">Failed</span>
```

## 🔥 Firebase Development

### Local Setup
1. Create Firebase project
2. Enable Authentication and Firestore
3. Download service account key
4. Update `.env.local` with your config

### Security Rules (Development)
```javascript
// Firestore rules for development
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

## 📱 PWA Development

The app is configured as a Progressive Web App:

- **Manifest**: `/public/manifest.json`
- **Service Worker**: Auto-generated by Next.js
- **Icons**: Place app icons in `/public/`

### Testing PWA Features
1. Build the app: `npm run build && npm run start`
2. Open Chrome DevTools → Application → Service Workers
3. Test offline functionality
4. Use Lighthouse to audit PWA score

## 🧪 Testing Guidelines

### Component Testing
```tsx
// Example test structure
import { render, screen } from '@testing-library/react';
import { Button } from '@/components/ui/Button';

test('renders button with text', () => {
  render(<Button>Click me</Button>);
  expect(screen.getByText('Click me')).toBeInTheDocument();
});
```

### Firebase Testing
Use Firebase Emulator Suite for local testing:
```bash
firebase emulators:start
```

## 🚀 Deployment

### Vercel (Recommended)
1. Connect your GitHub repository
2. Set environment variables
3. Deploy automatically on push

### Manual Build
```bash
npm run build
npm run start
```

## 🐛 Debugging

### Common Issues

**1. Firebase Auth Errors**
- Check API keys in `.env.local`
- Verify domain configuration in Firebase Console

**2. Turbopack Issues**
- Fallback to regular dev: `npm run dev:regular`
- Clear `.next` folder: `rm -rf .next`

**3. Build Errors**
- Check TypeScript errors: `npx tsc --noEmit`
- Run linter: `npm run lint`

### VS Code Setup

**Recommended Extensions:**
- ES7+ React/Redux/React-Native snippets
- Tailwind CSS IntelliSense
- Firebase Explorer
- Error Lens
- Auto Rename Tag

**Settings:**
```json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "emmet.includeLanguages": {
    "javascript": "javascriptreact"
  }
}
```

## 📊 Performance

### Bundle Analysis
```bash
npm run build:analyze
```

### Core Web Vitals
- Keep bundle size < 250KB
- Optimize images with Next.js Image component
- Use dynamic imports for heavy components

## 🔒 Security

### Environment Variables
- Never commit `.env.local`
- Use `NEXT_PUBLIC_` prefix for client-side variables
- Keep sensitive keys server-side only

### Firebase Security
- Implement proper Firestore security rules
- Validate data on both client and server
- Use Firebase Admin SDK for server operations

## 🤝 Contributing

1. Create feature branch: `git checkout -b feature/awesome-feature`
2. Make changes and test locally
3. Run linter: `npm run lint`
4. Commit changes: `git commit -m 'Add awesome feature'`
5. Push and create Pull Request

### Code Standards
- Use TypeScript for all new code
- Follow existing naming conventions
- Add JSDoc comments for complex functions
- Keep components small and focused
